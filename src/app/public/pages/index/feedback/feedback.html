<section class="feedback-section py-5 mt-4 text-center text-md-start">
  <div
    class="container d-flex flex-column flex-md-row align-items-center justify-content-between gap-4 px-0"
  >
    <!-- LEFT: Motivational Message -->
    <div class="cta-text">
      <h5 class="fw-semibold mb-2 text-accent">Start small. Scale habits.</h5>
      <p class="small mb-3 mb-md-0">
        Build routines. Track progress. Improve over time.<br />
        Every system starts with one small action let's make yours count.
      </p>
    </div>

    <!-- RIGHT: Feedback Card -->
    <div
      class="feedback-card card rounded-5 border shadow-sm text-center px-4 py-3"
      data-bs-toggle="modal"
      data-bs-target="#feedbackModal"
      role="button"
      tabindex="0"
      aria-label="Open feedback form"
    >
      <i class="bi bi-chat-dots-fill text-accent fs-3 mb-2"></i>
      <h6 class="fw-semibold mb-1">We'd love your feedback</h6>
      <p class="small text-muted mb-0">
        Share your thoughts it helps MyManagement improve.
      </p>
    </div>
  </div>

  <!-- MODAL -->
  <div
    class="modal fade"
    id="feedbackModal"
    tabindex="-1"
    aria-labelledby="feedbackModalLabel"
    aria-hidden="true"
  >
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content rounded-4 border-0 shadow-lg">
        <div class="modal-header border-0">
          <h5 class="modal-title fw-semibold" id="feedbackModalLabel">
            <i class="bi bi-leaf me-2"></i>
            Send Feedback
          </h5>
          <button
            type="button"
            class="btn-close"
            data-bs-dismiss="modal"
            aria-label="Close"
          ></button>
        </div>

        <div class="modal-body">
          <!-- Alert -->
          @if (alertVisible) {
            <div
              class="alert alert-success alert-dismissible fade show rounded-3 py-2"
              role="alert"
            >
              <i class="bi bi-check-circle-fill me-2"></i>
              Thanks for your feedback!
            </div>
          }

          <!-- Feedback Form -->
          <form (ngSubmit)="submitFeedback(feedbackForm)" #feedbackForm="ngForm">
            <div class="mb-3">
              <label for="name" class="form-label small fw-semibold">Name</label>
              <input
                type="text"
                id="name"
                name="name"
                class="form-control rounded-4"
                [(ngModel)]="feedback.name"
                placeholder="Your name (optional)"
              />
            </div>

            <div class="mb-3">
              <label for="email" class="form-label small fw-semibold">Email</label>
              <input
                type="email"
                id="email"
                name="email"
                class="form-control rounded-4"
                [(ngModel)]="feedback.email"
                placeholder="you@example.com (optional)"
              />
            </div>

            <div class="mb-3">
              <label for="message" class="form-label small fw-semibold">
                Message <span class="text-danger">*</span>
              </label>
              <textarea
                id="message"
                name="message"
                rows="3"
                required
                class="form-control rounded-4"
                [(ngModel)]="feedback.message"
                placeholder="Share your thoughts..."
              ></textarea>
            </div>

            <!-- Rating Stars -->
            <div class="mb-4 text-center">
              <label class="form-label mb-2 d-block">
                Rate your experience
              </label>
              <div class="rating-stars fs-5">
                @for (star of [1, 2, 3, 4, 5]; track star) {
                  <i
                    class="bi"
                    [class.bi-star]="feedback.rating < star"
                    [class.bi-star-fill]="feedback.rating >= star"
                    [ngClass]="{ 'text-warning': feedback.rating >= star }"
                    (click)="setRating(star)"
                    role="button"
                    tabindex="0"
                    aria-label="Rate {{ star }} stars"
                  ></i>
                }
              </div>
            </div>

            <div class="d-flex justify-content-end gap-2">
              <button
                type="button"
                class="btn btn-light rounded-5 px-3"
                data-bs-dismiss="modal"
              >
                Cancel
              </button>
              <button
                type="submit"
                class="btn primary-cta rounded-5 px-4"
                [disabled]="!feedback.message.trim()"
              >
                <i class="bi bi-send-fill me-2"></i>Send
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</section>
